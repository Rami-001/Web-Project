<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Settings â€¢ Global Compass</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- HEADER -->
  <header class="main-header">
    <nav class="nav-bar">
      <div class="logo-container">
        <img id="nav-logo" src="imgs/logo.png" alt="Logo" />
        <span class="logo-text">Global Compass</span>
      </div>

      <ul id="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="aboutus.html">About Us</a></li>
        <li class="dropdown"><a href="#">Services</a></li>
        <li><a href="contactus.html">Contact Us</a></li>
        <li><a href="Subscribtion.html">Plans</a></li>
      </ul>

      <div class="right-rail">
        <div class="Login-Signup">
          <a class="login" href="login.html">Login</a>
          <a class="Signup" href="signup.html">Sign up</a>
        </div>
        <div id="welcome-user" class="welcome-inline">Welcome, <span id="user-name"></span>!</div>
        <div class="profile-dropdown">
          <img id="nav-avatar" src="imgs/profile.svg" alt="Profile" />
          <div class="profile-menu">
            <a href="settings.html"><img class="profile-icon" src="imgs/setting.svg" alt="Settings" />Settings</a>
            <a href="#" id="logout-link"><img class="profile-icon" src="imgs/logout.svg" alt="Logout" />Logout</a>
          </div>
        </div>
        <button class="nav-toggle" aria-label="Toggle navigation"><span class="bar"></span><span class="bar"></span><span class="bar"></span></button>
      </div>
    </nav>
  </header>

  <!-- DROPDOWN -->
  <div class="dropdown-content">
    <div class="Service-column">
      <h4>Health &amp; Safety</h4>
      <a href="Services.html?category=hospital">Hospital</a>
      <a href="Services.html?category=pharmacy">Pharmacy</a>
      <a href="Services.html?category=police">Police Station</a>
    </div>
    <div class="Service-column">
      <h4>Finance</h4>
      <a href="Services.html?category=bank">Bank</a>
      <a href="Services.html?category=atm">ATM</a>
      <a href="Services.html?category=exchange">Money Exchanger</a>
    </div>
    <div class="Service-column">
      <h4>Sustenance &amp; Lodging</h4>
      <a href="Services.html?category=restaurant">Restaurant</a>
      <a href="Services.html?category=coffee">Coffee Shop</a>
      <a href="Services.html?category=hotel">Hotel</a>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <main style="padding: 40px 14px; flex: 1;">
    <div class="settings-grid">
      <!-- Theme Settings -->
      <div class="settings-card">
        <h2>Appearance</h2>
        <div class="theme-toggle-section">
          <div class="theme-toggle-label">
            <span>ðŸŒ™ Dark Mode</span>
            <p>Toggle between dark and light theme</p>
          </div>
          <label class="theme-toggle-switch">
            <input type="checkbox" id="theme-toggle">
            <span class="theme-toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Subscription Settings -->
      <div class="settings-card">
        <h2>Subscription</h2>
        <div class="subscription-section">
          <div class="plan-display">
            <div class="plan-box">
              <label>Current Plan</label>
              <div class="value" id="current-plan">Free</div>
            </div>
            <div class="plan-box">
              <label>Status</label>
              <div class="value" id="plan-status">Active</div>
            </div>
          </div>
          <div class="action-buttons">
            <button class="action-btn primary" onclick="upgradePlan()">Upgrade Plan</button>
            <button class="action-btn danger" onclick="cancelPlan()">Cancel Subscription</button>
          </div>
          <div id="subscription-msg" class="settings-msg" style="display:none;"></div>
        </div>
      </div>

      <!-- Notification Settings -->
      <div class="settings-card">
        <h2>Notifications</h2>
        <div class="subscription-section">
          <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
            <input type="checkbox" id="email-notifications" checked style="width:18px; height:18px; cursor:pointer;">
            <span style="color: var(--gc-text); font-weight:600;">Email me about important updates</span>
          </label>
          <button class="action-btn primary" style="margin-top:12px; width:100%;" onclick="saveNotifications()">Save Preferences</button>
          <div id="notification-msg" class="settings-msg" style="display:none; margin-top:12px;"></div>
        </div>
      </div>

      <!-- Account Settings -->
      <div class="settings-card">
        <h2>Account</h2>
        <div class="subscription-section">
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
            <button class="action-btn primary" onclick="changePassword()">Change Password</button>
            <button class="action-btn danger" onclick="deleteAccount()">Delete Account</button>
          </div>
          <div id="account-msg" class="settings-msg" style="display:none; margin-top:12px;"></div>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <div class="footer-background">
    <footer>
      <div class="footer-left">
        <img id="footer-logo" src="imgs/logo.png" alt="Logo" />
        <span class="footer-brand">Global Compass</span>
      </div>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="Subscribtion.html">Plans</a>
      </div>
      <div id="copy-right">&copy; 2025 Global Compass. All rights reserved.</div>
    </footer>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="script.js"></script>
  <script type="module" src="auth.js"></script>
  <script>
    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle');
    const htmlElement = document.documentElement;
    const body = document.body;

    // Check saved theme preference
    const savedTheme = localStorage.getItem('theme') || 'dark';
    if (savedTheme === 'light') {
      body.classList.add('light-mode');
      themeToggle.checked = true;
    }

    themeToggle.addEventListener('change', () => {
      if (themeToggle.checked) {
        body.classList.add('light-mode');
        localStorage.setItem('theme', 'light');
      } else {
        body.classList.remove('light-mode');
        localStorage.setItem('theme', 'dark');
      }
    });

    // Plan management
    function updatePlanDisplay() {
      const currentPlan = localStorage.getItem('userPlan') || 'free';
      document.getElementById('current-plan').textContent = currentPlan.charAt(0).toUpperCase() + currentPlan.slice(1);
      document.getElementById('plan-status').textContent = currentPlan === 'free' ? 'Free' : 'Active';
    }

    function upgradePlan() {
      window.location.href = 'Subscribtion.html';
    }

    function cancelPlan() {
      if (confirm('Are you sure you want to cancel your subscription?')) {
        localStorage.setItem('userPlan', 'free');
        const msg = document.getElementById('subscription-msg');
        msg.textContent = 'Subscription cancelled. Reverted to free plan.';
        msg.classList.add('error');
        msg.style.display = 'block';
        updatePlanDisplay();
        setTimeout(() => msg.style.display = 'none', 3000);
      }
    }

    function saveNotifications() {
      const emailNotif = document.getElementById('email-notifications').checked;
      localStorage.setItem('emailNotifications', emailNotif);
      const msg = document.getElementById('notification-msg');
      msg.textContent = 'Notification preferences saved!';
      msg.classList.remove('error');
      msg.classList.add('success');
      msg.style.display = 'block';
      setTimeout(() => msg.style.display = 'none', 3000);
    }

    function changePassword() {
      alert('Redirecting to password change page...');
    }

    function deleteAccount() {
      if (confirm('This action cannot be undone. Are you sure?')) {
        alert('Account deletion requested. Please contact support to confirm.');
      }
    }

    // Initialize
    updatePlanDisplay();
  </script>
</body>
</html>